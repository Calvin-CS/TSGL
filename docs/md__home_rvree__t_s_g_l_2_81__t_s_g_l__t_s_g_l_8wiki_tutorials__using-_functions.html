<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSGL: Using-Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TSGL
   </div>
   <div id="projectbrief">A thread-safe graphics library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using-Functions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>You can't spell "functions" without "fun"!</p>
<p>On a more serious note, TSGL has the capability to graph mathematical functions.</p>
<p>We've been working with the standard Canvas class, but there's also another type of Canvas that is very useful for this purpose.</p>
<p>It's affectionately called the <em><b>CartesianCanvas</b></em>.</p>
<p>Its a subclass of the Canvas class and so inherits and overrides many of the Canvas methods as well as adds some of its own.</p>
<p>This type of Canvas has an adjustable Cartesian coordinate system. What that means is that instead of the point <code>(0, 0)</code> being in the top-left corner of the screen like in the standard Canvas, you can now specify where you want the center to be.</p>
<p><em><b>Linux/Mac users:</b></em> Follow the steps from the previous tutorials. See the video on multi file programs in <a href="https://github.com/Calvin-CS/TSGL/wiki/Building-Programs">Building Programs</a> page. Name the folder "Tutorial6" and the file "cartesian.cpp". Replace "program" in the "TARGET" line of the Makefile with "cartesian".</p>
<p><em><b>Windows users:</b></em> Follow the steps from the previous tutorials. Name the Solution folder "Tutorial6" and the Visual Studio project "Cartesian". After adding the Property sheet, name the .cpp file "cartesian.cpp".</p>
<p><em><b>All three platforms:</b></em> Follow the steps in the [[Building Programs]] page on how to compile and run the program (Linux/Mac users, this is a multi-file program).</p>
<p>Let's start with a simple example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_cartesian_canvas.html">CartesianCanvas</a> c(0, 0, 500, 500, -5.0, -5.0, 5.0, 50.0, <span class="stringliteral">&quot;Cartesian Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compile the code and run it. A blank gray screen should pop up.</p>
<p>Looking at the code, it looks eerily similar to how a Canvas is constructed but with a few added parameters The constructor creates a CartesianCanvas whose upper left corner is at screen coordinate <code>(0, 0)</code>, with a width of <code>500</code> and a height of <code>500</code>. It then sets and scales the CartesianCanvas’s axes and internal coordinate system so that the left edge of the canvas is <code>x = -5.0</code> in the Cartesian coordinate system, the bottom edge is <code>y = -5.0</code>, the right edge is <code>x = +5.0</code>, and the top edge is <code>y = +50.0</code>. It then gives the window a title, <code>Cartesian Example</code>, and uses the default timer length of <code>0.0</code> (which you can set explicitly if you so desire, as described in our [[Animation Loops]] tutorial).</p>
<p>If we wanted to instead center the CartesianCanvas somewhere else, all we would have to do is change the first two parameters:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_cartesian_canvas.html">CartesianCanvas</a> c(300, 400, 500, 500, -5.0, -5.0, 5.0, 50.0, <span class="stringliteral">&quot;Cartesian Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>That should create a 500x500 CartesianCanvas whose upper left corner is positioned at <code>(300, 400)</code> on your monitor.</p>
<p>Notice how the Canvas has integer coordinates whereas the CartesianCanvas has Decimal coordinates.</p>
<p>Notice also how you can set the upper left corner of the CartesianCanvas with the first two arguments. These arguments can be used to position the canvas arbitrarily. You can set it pretty much anywhere you want (within reason of course. It has to be within the range of the size of the screen.).</p>
<p>You can use the 4th, 5th, 6th, and 7th arguments to set the bounds of the coordinate system within the CartesianCanvas.</p>
<p>As mentioned before, the CartesianCanvas handles colors, shapes, and drawing loops in much the same way as a standard Canvas does.</p>
<p>Now, how can we graph mathematical functions?</p>
<p>Well, let's first tell the CartesianCanvas to draw axes:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code" href="classtsgl_1_1_cartesian_canvas.html">CartesianCanvas</a> c(0, 0, 500, 500, -5, -5, 5, 50, <span class="stringliteral">&quot;Cartesian Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.setBackgroundColor(WHITE);  <span class="comment">//Set the color to white to see the axes better</span></div>
<div class="line">  c.drawAxes(0.0, 0.0, 1.0, 5.0);</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Recompile and run. The screen should pop up with a white background and axes drawn.</p>
<p>The <code>drawAxes()</code> method takes in these parameters:</p><ul>
<li>x-coordinate of the center of the CartesianCanvas (<code>0.0</code>).</li>
<li>y-coordinate of the center of the CartesianCanvas (<code>0.0</code>).</li>
<li>The spacing between the tick marks along the x-axis (<code>1.0</code>).</li>
<li>The spacing between the tick marks along the y-axis (<code>5.0</code>).</li>
</ul>
<p>Now, let's graph a function!</p>
<p>Wait...how do we do that?</p>
<p>It's rather simple really. TSGL comes with a built in <code>Function</code> class, and CartesianCanvas has a <code>drawFunction()</code> method that draws the graph of a given <code>Function</code> <em><b>OR</b></em> any subclass of <code>Function</code>.</p>
<p>Before we continue, let us say a few notes that are platform dependent:</p>
<p><em><b>Linux/Mac users:</b></em> Create two new files: Cotangent.h and Cotangent.cpp.</p>
<p><em><b>Windows users:</b></em> Add a Cotangent.cpp and Cotangent.h file to your project.</p>
<p>To draw a specific mathematical function, we must define it as a subclass of the <code>Function</code> class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Cotangent : <span class="keyword">public</span> <a class="code" href="classtsgl_1_1_function.html">Function</a> { </div>
<div class="line"><span class="comment">//This is the .h file</span></div>
<div class="line">};</div>
</div><!-- fragment --><p>In order for <code>drawFunction()</code> to draw it, the subclass, <code>Cotangent</code>, must supply a definition for the <code>valueAt()</code> method that is declared in the <code>Function</code> class. <br  />
</p>
<p>Here is the declaration from class <code>Function</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">virtual</span> Decimal valueAt(Decimal x) <span class="keyword">const</span> = 0;</div>
</div><!-- fragment --><p>This method is called an "abstract method” or “pure virtual function”. It can't be used on its own because there is no definition for it in the <code>Function</code> class.</p>
<p>However, any subclass that inherits from the <code>Function</code> class can (and <em>MUST</em>) provide a definition for this method.</p>
<p>That's exactly what we're going to do in the <code>Cotangent</code> class:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;tsgl.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>tsgl;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Cotangent : <span class="keyword">public</span> <a class="code" href="classtsgl_1_1_function.html">Function</a> {</div>
<div class="line"> <span class="comment">//This is the .h file</span></div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">virtual</span> Decimal valueAt(Decimal x) <span class="keyword">const</span>; </div>
<div class="line">};</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Cotangent.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//This is the .cpp file</span></div>
<div class="line">Decimal Cotangent::valueAt(Decimal x)<span class="keyword"> const </span>{</div>
<div class="line">    <span class="keywordflow">return</span> cos(x) / sin(x);</div>
<div class="line">}</div>
</div><!-- fragment --><p>As you can see, we define the <code>valueAt(x)</code> function to return the cotangent of x.</p>
<p>TSGL predefines the <code>Power</code>, <code>Square Root</code>, <code>Sine</code>, <code>Cosine</code>, <code>Tangent</code>, <code>Absolute Value</code>, <code>Exponential</code>, <code>Natural Log</code>, <code>Common Log</code>, <code>Ceiling</code>, <code>Floor</code>, and <code>Round</code> functions in a similar fashion.</p>
<p>It does not predefine the <code>Cotangent</code> function, which is why we had to define it ourselves.</p>
<p>Continuing forward, let's add a change to our cartesian.cpp file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Cotangent.h&quot;</span> <span class="comment">//Take out the #include &lt;tsgl.h&gt; directive</span></div>
<div class="line">                       <span class="comment">//As well as the using namespace tsgl directive</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  CartesianCanvas c(0, 0, 500, 500, -5, -5, 5, 50, <span class="stringliteral">&quot;Cartesian Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.setBackgroundColor(WHITE); <span class="comment">//Set the color to white to see the axes better</span></div>
<div class="line">  c.drawAxes(0.0, 0.0, 1.0, 5.0);</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now we are ready to graph the <code>Cotangent</code> function!</p>
<p>To do so, simply create an instance of the <code>Cotangent</code> class and then pass it to the <code>drawFunction()</code> method from the CartesianCanvas object:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Cotangent.h&quot;</span> <span class="comment">//Take out the #include &lt;tsgl.h&gt; directive</span></div>
<div class="line">                       <span class="comment">//As well as the using namespace tsgl directive</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//Main program</span></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  CartesianCanvas c(0, 0, 500, 500, -5, -5, 5, 50, <span class="stringliteral">&quot;Cartesian Example&quot;</span>);</div>
<div class="line">  c.start();</div>
<div class="line">  c.setBackgroundColor(WHITE);  <span class="comment">//Set the color to white to see the axes better</span></div>
<div class="line">  c.drawAxes(0.0, 0.0, 1.0, 5.0);</div>
<div class="line">  Cotangent cot;  <span class="comment">//Create an instance of the Cotangent class</span></div>
<div class="line">  <span class="comment">//Drawing loop</span></div>
<div class="line">  <span class="keywordflow">while</span>(c.isOpen()) {</div>
<div class="line">    c.sleep();</div>
<div class="line">    c.drawFunction(cot); <span class="comment">//Draw it onto the CartesianCanvas</span></div>
<div class="line">  }</div>
<div class="line">  c.wait();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Recompile and run. The graph of the <code>Cotangent</code> function should be drawn!</p>
<p>We didn't see it being drawn though...</p>
<p>That's because we omitted a second parameter, which is the length of time that we should have the main thread sleep for so that it can be in sync with the Canvas.</p>
<p>Omitting this parameter just draws the entire function “instantly" and so therefore, we can't see it.</p>
<p>We can change this, however, by not omitting the second parameter:</p>
<div class="fragment"><div class="line">c.drawFunction(cot, FRAME);</div>
</div><!-- fragment --><p>By placing <code>FRAME</code> as the second parameter, we tell the main thread to sleep for <code>FRAME</code> seconds (1/60th of a second) and then that syncs with the Canvas so that we can see the drawing actually occurring.</p>
<p>It's a little slow though, how can we speed it up?</p>
<p>To make it go faster, simply change the second parameter:</p>
<div class="fragment"><div class="line">c.drawFunction(cot, FRAME/2);</div>
</div><!-- fragment --><p>This makes it so that the thread sleeps for every <code>FRAME/2</code> of a second (or 1/120th of a second) and then a point is drawn on the Canvas.</p>
<p>There's also a third optional parameter which is the color of the function (set to <code>BLACK</code> by default).</p>
<p>See <a href="http://calvin-cs.github.io/TSGL/html/classtsgl_1_1_function.html">Function.h</a> for more information on the predefined functions in TSGL.</p>
<p>If you ever want to graph a mathematical function that is not predefined, you will have to define it yourself in the same way as we did for the <code>Cotangent</code> function.</p>
<p>Please note: The standard Canvas is intended for drawing shapes and animation loops; the CartesianCanvas is a specialized kind of Canvas for drawing mathematical functions.</p>
<p>See <a href="http://calvin-cs.github.io/TSGL/html/classtsgl_1_1_cartesian_canvas.html">CartesianCanvas</a> in the TSGL API for more information on the special kind of Canvas.</p>
<p>That completes this tutorial!</p>
<p>In the next tutorial, [[Using Keyboard &amp;&amp; Mouse]], we take a look at how to handle keyboard and mouse events! </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclasstsgl_1_1_function_html"><div class="ttname"><a href="classtsgl_1_1_function.html">tsgl::Function</a></div><div class="ttdoc">A base class for creating mathematical functions plottable by a CartesianCanvas.</div><div class="ttdef"><b>Definition:</b> Function.h:19</div></div>
<div class="ttc" id="aclasstsgl_1_1_cartesian_canvas_html"><div class="ttname"><a href="classtsgl_1_1_cartesian_canvas.html">tsgl::CartesianCanvas</a></div><div class="ttdoc">Canvas extended with Cartesian drawing operations.</div><div class="ttdef"><b>Definition:</b> CartesianCanvas.h:19</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 26 2021 14:41:19 for TSGL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
